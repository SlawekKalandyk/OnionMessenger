SERVER_DIST_NAME = OnionMessengerServer
APP_BUILD_DIR = ../appbuild

.PHONY: publish
publish:
	pipenv run pyinstaller --onefile --name ${SERVER_DIST_NAME} --specpath ${APP_BUILD_DIR}/spec --distpath ${APP_BUILD_DIR}/dist --workpath ${APP_BUILD_DIR}/build outer_script.py --hidden-import _cffi_backend --hidden-import eventlet.hubs.epolls --hidden-import eventlet.hubs.kqueue --hidden-import eventlet.hubs.selects --hidden-import dns.dnssec --hidden-import dns.e164 --hidden-import dns.edns --hidden-import dns.entropy --hidden-import dns.exception --hidden-import dns.flags --hidden-import dns.grange --hidden-import dns.hash --hidden-import dns.inet --hidden-import dns.ipv4 --hidden-import dns.ipv6 --hidden-import dns.message --hidden-import dns.name --hidden-import dns.namedict --hidden-import dns.node --hidden-import dns.opcode --hidden-import dns.query --hidden-import dns.rcode --hidden-import dns.rdata --hidden-import dns.rdataclass --hidden-import dns.rdataset --hidden-import dns.rdatatype --hidden-import dns.renderer --hidden-import dns.resolver --hidden-import dns.reversename --hidden-import dns.rrset --hidden-import dns.set --hidden-import dns.tokenizer --hidden-import dns.tsig --hidden-import dns.tsigkeyring --hidden-import dns.ttl --hidden-import dns.update --hidden-import dns.version --hidden-import dns.wiredata --hidden-import dns.zone